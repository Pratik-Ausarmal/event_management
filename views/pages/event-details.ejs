<%- include('../partials/header', { 
    title: (event?.title || 'Event') + ' - Event Management', 
    currentPage: 'event-details' 
}) %>

<%- include('../partials/navbar', { user: user || null, currentPage: 'event-details' }) %>

<div class="container py-5">
<div class="row">

<!-- Event Details -->
<div class="col-lg-8">

<!-- Event Image -->
<div class="card border-0 shadow-sm mb-4">
<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTXFs0wbg-TcpKc5emzM2dq2die8nAEOpWRug&s" 
     class="card-img-top rounded-top" 
     alt="<%= event?.title || 'Event Image' %>"
     style="height: 400px; object-fit: cover;">
</div>

<!-- Event Info -->
<div class="card border-0 shadow-sm mb-4">
<div class="card-body">

<h1 class="mb-2"><%= event?.title || 'No Title' %></h1>

<span class="badge bg-primary fs-6 mb-2">
<%= event?.type ? event.type.charAt(0).toUpperCase() + event.type.slice(1) : 'General' %>
</span>

<p class="text-muted">
ðŸ“… <%= event?.date ? new Date(event.date).toDateString() : 'Date not available' %>
</p>

<h3 class="text-primary">â‚¹<%= event?.price || 0 %></h3>

<p class="fs-5"><%= event?.description || 'No description available.' %></p>

<ul class="list-unstyled">
<li><strong>Time:</strong> <%= event?.time || 'N/A' %></li>
<li><strong>Location:</strong> <%= event?.location || 'N/A' %></li>
<li><strong>Capacity:</strong> <%= event?.capacity || 0 %></li>
</ul>

</div>
</div>
</div>

<!-- Booking Sidebar -->
<div class="col-lg-4">
<div class="card shadow-sm">

<div class="card-body">
<h4>Book This Event</h4>

<form action="/booking/create" method="POST">
<input type="hidden" name="eventId" value="<%= event?.id || '' %>">

<div class="mb-3">
<label>Guests</label>
<input type="number" class="form-control" name="guestCount" min="1" value="1" required>
</div>

<button class="btn btn-primary w-100" type="submit">
Book Now
</button>

</form>
</div>
</div>
</div>

</div>
</div>

<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {

    const basePrice = Number("â‚¹<%= event?.price || 0 %>");
    const totalAmount = document.getElementById("totalAmount");

    if(totalAmount){
        totalAmount.innerText = "â‚¹" + basePrice;
    }

});
</script>

</body>
</html>
